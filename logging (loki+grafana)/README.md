–û—Ç–ª–∏—á–Ω–æ, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –ú—ã —Ä–∞–∑–≤–µ—Ä–Ω–µ–º **Loki** –≤ —Ä–µ–∂–∏–º–µ **Monolithic (Single Binary)**. –≠—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –≤–∞—à–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏: –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Loki —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –æ–¥–Ω–æ–º –ø–æ–¥–µ, –Ω–æ –¥–∞–Ω–Ω—ã–µ (—á–∞–Ω–∫–∏ –ª–æ–≥–æ–≤) —É–ª–µ—Ç–∞—é—Ç –≤ S3 (MinIO), —á—Ç–æ –¥–∞–µ—Ç –Ω–∞–º "–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ" –∏ –¥–µ—à–µ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

### –ü–ª–∞–Ω —Ä–∞–±–æ—Ç:
1.  **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ MinIO:** –°–æ–∑–¥–∞–µ–º –±–∞–∫–µ—Ç—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
2.  **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Loki:** –û—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ª–æ–≥–æ–≤.
3.  **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Promtail:** –ê–≥–µ–Ω—Ç —Å–±–æ—Ä–∞ –ª–æ–≥–æ–≤ —Å –Ω–æ–¥.
4.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Grafana:** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö.

---

### –®–ê–ì 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ MinIO

–í–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –±–∞–∫–µ—Ç –¥–ª—è –ª–æ–≥–æ–≤. –¢–∞–∫ –∫–∞–∫ –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö –¥–æ–ª–≥–æ, MinIO ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ.

1.  –ó–∞–π–¥–∏—Ç–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å MinIO (`https://minio.ccsfarm.local`).
2.  –°–æ–∑–¥–∞–π—Ç–µ **Bucket**:
    *   –ò–º—è: `loki-data`
    *   Versioning: Off (Loki —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–µ—Ä—Å–∏—è–º–∏ —Å–∞–º)
    *   Locking: Off
3.  (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ **User** (Identity -> Users):
    *   Access Key: `loki`
    *   Secret Key: `SuperSecretLokiPassword123!` (–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π!)
    *   Policy: `readwrite` (–¥–ª—è –±–∞–∫–µ—Ç–∞ `loki-data`).
<!-- –í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ, –≤—ã –Ω–µ –æ—à–∏–±–ª–∏—Å—å. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ MinIO.

–í –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏—è—Ö MinIO (–æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ –æ–Ω–∞ –∑–∞–ø—É—â–µ–Ω–∞ –±–µ–∑ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º—ã Identity —Ç–∏–ø–∞ LDAP/OpenID) —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (Users)** –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –º–µ–Ω—é **Administrator -> Identity -> Users**.

–û–¥–Ω–∞–∫–æ, –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (—Ç–∞–∫–æ–≥–æ –∫–∞–∫ Loki, Terraform, S3-–∫–ª–∏–µ–Ω—Ç—ã) –ø—Ä–∞–≤–∏–ª—å–Ω–µ–µ –∏ –ø—Ä–æ—â–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å **Service Accounts (Access Keys)**, –∞ –Ω–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–æ–Ω—Å–æ–ª–∏.

–£ –≤–∞—Å –µ—Å—Ç—å –¥–≤–∞ –ø—É—Ç–∏: —á–µ—Ä–µ–∑ UI (–µ—Å–ª–∏ –Ω–∞–π–¥–µ–º –∫–Ω–æ–ø–∫—É) –∏–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É (—Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç, —Ç–∞–∫ –∫–∞–∫ –≤—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∫–ª–∞—Å—Ç–µ—Ä–∞).

---

### –í–∞—Ä–∏–∞–Ω—Ç 1: –°–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π (—á–µ—Ä–µ–∑ CLI –≤–Ω—É—Ç—Ä–∏ –ø–æ–¥–∞)

–¢–∞–∫ –∫–∞–∫ —É –≤–∞—Å —É–∂–µ –∑–∞–ø—É—â–µ–Ω MinIO, –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —É–∂–µ –µ—Å—Ç—å —É—Ç–∏–ª–∏—Ç–∞ `mc` (MinIO Client). –ú—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è Loki –ø—Ä—è–º–æ –æ—Ç—Ç—É–¥–∞ –∑–∞ 30 —Å–µ–∫—É–Ω–¥.

1.  **–ó–∞–π–¥–∏—Ç–µ –≤–Ω—É—Ç—Ä—å –æ–¥–Ω–æ–≥–æ –∏–∑ –ø–æ–¥–æ–≤ MinIO:**
    ```bash
    kubectl exec -it minio-0 -n minio -- sh
    ```

2.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–∏–∞—Å (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ) –∫ —Å–∞–º–æ–º—É —Å–µ–±–µ:**
    –ü–æ—Å–∫–æ–ª—å–∫—É –º—ã –≤–Ω—É—Ç—Ä–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º `localhost`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –∏–∑ –≤–∞—à–µ–≥–æ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ (`admin` / `password`).
    ```bash
    mc alias set local http://localhost:9000 admin password
    ```
    *(–î–æ–ª–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å: `Added 'local' successfully.`)*

3.  **–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `loki`:**
    ```bash
    mc admin user add local loki SuperSecretLokiPassword123!
    ```

4.  **–î–∞–π—Ç–µ –µ–º—É –ø—Ä–∞–≤–∞ (Policy):**
    –î–∞–¥–∏–º –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ `readwrite` (—á—Ç–æ–±—ã Loki –º–æ–≥ —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–∞–∫–µ—Ç—ã –∏ –ø–∏—Å–∞—Ç—å —á–∞–Ω–∫–∏).
    ```bash
    mc admin policy attach local readwrite --user loki
    ```

5.  **–ì–æ—Ç–æ–≤–æ.** –í—ã—Ö–æ–¥–∏—Ç–µ –∏–∑ –ø–æ–¥–∞ (`exit`).

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å:
*   **Access Key:** `loki`
*   **Secret Key:** `SuperSecretLokiPassword123!`

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –≤ `loki-values.yaml`.

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Web UI (–ï—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è –≤–∏–∑—É–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –≤—ã –∑–∞—à–ª–∏ –ø–æ–¥ `admin` / `password`:

1.  –í –ª–µ–≤–æ–º –º–µ–Ω—é –Ω–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **User** (–Ω–µ Administrator).
2.  –¢–∞–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É–Ω–∫—Ç **Access Keys** (–∏–ª–∏ **Service Accounts**).
3.  –ù–∞–∂–º–∏—Ç–µ **Create Access Key**.
4.  –≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –ø–∞—Ä—É –∫–ª—é—á–µ–π. –í—ã –º–æ–∂–µ—Ç–µ –≤—Ä—É—á–Ω—É—é –∑–∞–¥–∞—Ç—å –∏—Ö (–Ω–∞–∂–º–∏—Ç–µ "Edit" –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏):
    *   Access Key: `loki`
    *   Secret Key: `SuperSecretLokiPassword123!`
5.  –≠—Ç–æ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ—Å–∏–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü–æ—á–µ–º—É –≤—ã –º–æ–≥–ª–∏ –Ω–µ –≤–∏–¥–µ—Ç—å Users?**
–ò–Ω–æ–≥–¥–∞ –≤ —Å—Ç–∞—Ä—ã—Ö –∏–ª–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Å–±–æ—Ä–∫–∞—Ö MinIO, –µ—Å–ª–∏ –≤—ã –∑–∞—à–ª–∏ –ø–æ–¥ Root-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –º–µ–Ω—é "Identity" —Å–ø—Ä—è—Ç–∞–Ω–æ –≥–ª—É–±–æ–∫–æ –≤ **Administrator -> Identity -> Users**. –ù–æ —Å–æ–∑–¥–∞–Ω–∏–µ *Service Account* (Access Key) –¥–æ—Å—Ç—É–ø–Ω–æ –≤—Å–µ–≥–¥–∞.

---

### üìù –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç `loki-values.yaml`

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –∏–∑ –í–∞—Ä–∏–∞–Ω—Ç–∞ 1, –≤–∞—à –∫–æ–Ω—Ñ–∏–≥ Loki –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```yaml
loki:
  storage:
    s3:
      endpoint: http://minio.minio.svc.cluster.local:9000 # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∞–¥—Ä–µ—Å
      bucketnames: loki-data
      access_key_id: loki                         # –¢–æ—Ç, —á—Ç–æ —Å–æ–∑–¥–∞–ª–∏ —á–µ—Ä–µ–∑ mc
      secret_access_key: SuperSecretLokiPassword123! # –¢–æ—Ç, —á—Ç–æ —Å–æ–∑–¥–∞–ª–∏ —á–µ—Ä–µ–∑ mc
      s3forcepathstyle: true
      insecure: true
```

**–í–∞–∂–Ω–æ:** –ë–∞–∫–µ—Ç `loki-data` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω. –ï—Å–ª–∏ –Ω–µ —Å–æ–∑–¥–∞–ª–∏ —á–µ—Ä–µ–∑ UI ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ —á–µ—Ä–µ–∑ —Ç—É –∂–µ –∫–æ–Ω—Å–æ–ª—å:
```bash
mc mb local/loki-data
``` -->
---

### –®–ê–ì 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Values –¥–ª—è Loki

–ú—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —á–∞—Ä—Ç `grafana/loki`.
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `loki-values.yaml`.

**–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ:**
*   –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∞–¥—Ä–µ—Å MinIO (`minio.minio.svc...`), —á—Ç–æ–±—ã —Ç—Ä–∞—Ñ–∏–∫ –Ω–µ –ø–æ–∫–∏–¥–∞–ª –∫–ª–∞—Å—Ç–µ—Ä –∏ –Ω–µ —É–ø–∏—Ä–∞–ª—Å—è –≤ SSL-–ø—Ä–æ–≤–µ—Ä–∫–∏.
*   –í–∫–ª—é—á–∞–µ–º `compactor`, —á—Ç–æ–±—ã Loki –º–æ–≥ —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ (Retention).

```yaml
deploymentMode: SingleBinary

loki:
  auth_enabled: false # –í–Ω—É—Ç—Ä–∏ –ø–µ—Ä–∏–º–µ—Ç—Ä–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–µ–Ω–∞–Ω—Ç–æ–≤ (X-Scope-OrgID) –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞
  
  common:
    replication_factor: 1
    path_prefix: /var/loki
    storage:
      s3:
        endpoint: http://minio.minio.svc.cluster.local:9000
        bucketnames: loki-data
        access_key_id: loki
        secret_access_key: SuperSecretLokiPassword123! # <-- –í—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–π –ø–∞—Ä–æ–ª—å
        s3forcepathstyle: true
        insecure: true # –í–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ HTTP

  schema_config:
    configs:
      - from: 2024-01-01
        store: tsdb
        object_store: s3
        schema: v13
        index:
          prefix: index_
          period: 24h

  storage:
    type: s3
    bucketNames:
      chunks: loki-data
      ruler: loki-data
      admin: loki-data

  # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ (Retention)
  compactor:
    working_directory: /var/loki/compactor
    shared_store: s3
    compaction_interval: 10m
    retention_enabled: true
    retention_delete_delay: 2h
    retention_delete_worker_count: 150
  
  limits_config:
    retention_period: 30d # –•—Ä–∞–Ω–∏–º –ª–æ–≥–∏ 30 –¥–Ω–µ–π

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∏—Å–∫–∞ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞ (WAL)
singleBinary:
  replicas: 1
  persistence:
    enabled: true
    storageClass: managed-nfs-storage # –ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º NFS
    size: 20Gi 
  
  # –í–∞–∂–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ NFS (nobody:nogroup)
  podSecurityContext:
    fsGroup: 65534
    runAsUser: 65534
    runAsGroup: 65534

# –û—Ç–∫–ª—é—á–∞–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –µ—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Å–≤–æ–π prometheus-stack
monitoring:
  selfMonitoring:
    enabled: false
    lokiCanary:
      enabled: false
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Loki:**

```bash
# –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
helm repo add grafana https://grafana.github.io/helm-charts
helm repo update

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤ namespace monitoring
helm upgrade --install loki grafana/loki \
  --namespace monitoring \
  -f loki-values.yaml
```

---

### –®–ê–ì 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Promtail (–ê–≥–µ–Ω—Ç)

Promtail –¥–æ–ª–∂–µ–Ω —Å—Ç–æ—è—Ç—å –Ω–∞ *–∫–∞–∂–¥–æ–π* –Ω–æ–¥–µ, –ø–æ—ç—Ç–æ–º—É –æ–Ω —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ `DaemonSet`.
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `promtail-values.yaml`.

```yaml
config:
  clients:
    - url: http://loki.monitoring.svc.cluster.local:3100/loki/api/v1/push
      # –ï—Å–ª–∏ –≤—ã –≤–∫–ª—é—á–∏–ª–∏ auth_enabled: true –≤ Loki, —Ç—É—Ç –Ω—É–∂–µ–Ω tenant_id

# –í–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –ª–æ–≥–æ–≤ Kubernetes (CRI-O/Containerd)
snippets:
  pipelineStages:
    - cri: {}
    - docker: {}

# –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É—Ç–µ–π —Å –ª–æ–≥–∞–º–∏ —Ö–æ—Å—Ç–∞
extraVolumeMounts:
  - name: pods
    mountPath: /var/log/pods
    readOnly: true
extraVolumes:
  - name: pods
    hostPath:
      path: /var/log/pods
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Promtail:**

```bash
helm upgrade --install promtail grafana/promtail \
  --namespace monitoring \
  -f promtail-values.yaml
```

---

### –®–ê–ì 4: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Grafana

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ Loki –∑–∞–ø—É—â–µ–Ω –∏ Promtail –Ω–∞—á–∞–ª —Å–ª–∞—Ç—å –≤ –Ω–µ–≥–æ –¥–∞–Ω–Ω—ã–µ, –Ω—É–∂–Ω–æ –Ω–∞—É—á–∏—Ç—å Grafana –∏—Ö –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å.

1.  –û—Ç–∫—Ä–æ–π—Ç–µ Grafana (`https://grafana.ccsfarm.local`).
2.  –ò–¥–∏—Ç–µ –≤ **Connections** -> **Data Sources**.
3.  –ù–∞–∂–º–∏—Ç–µ **Add new data source** -> –≤—ã–±–µ—Ä–∏—Ç–µ **Loki**.
4.  –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
    *   **Name:** `Loki`
    *   **URL:** `http://loki.monitoring.svc.cluster.local:3100`
    *   –û—Å—Ç–∞–ª—å–Ω–æ–µ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (Auth –Ω–µ –Ω—É–∂–µ–Ω, –µ—Å–ª–∏ –≤—ã–∫–ª—é—á–∏–ª–∏ –µ–≥–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ Loki).
5.  –ù–∞–∂–º–∏—Ç–µ **Save & Test**.
    *   –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –∑–µ–ª–µ–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: *"Data source connected and labels found."*

---

### üîé –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç?

1.  –í Grafana –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Explore** (–∑–Ω–∞—á–æ–∫ –∫–æ–º–ø–∞—Å–∞).
2.  –°–≤–µ—Ä—Ö—É –≤—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ `Loki`.
3.  –í –ø–æ–ª–µ **Label filters** –≤—ã–±–µ—Ä–∏—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä: `app` = `webservice` (–∏–ª–∏ `gitlab-webservice`).
4.  –ù–∞–∂–º–∏—Ç–µ **Run query**.
5.  –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ –ª–æ–≥–æ–≤.

### üöÄ –ü–æ–ª–µ–∑–Ω—ã–π —Å–æ–≤–µ—Ç –¥–ª—è Dashboard (–°–≤—è–∑–∫–∞ –ú–µ—Ç—Ä–∏–∫ –∏ –õ–æ–≥–æ–≤)

–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∞ –º–∞–≥–∏—è "–∫–ª–∏–∫–Ω–∏ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫ ‚Äî —É–≤–∏–¥–∏—à—å –ª–æ–≥":
1.  –ó–∞–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Data Source **Prometheus** –≤ Grafana.
2.  –í–Ω–∏–∑—É –Ω–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **Exemplars**.
3.  –ù–æ –µ—â–µ –≤–∞–∂–Ω–µ–µ: –Ω–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **Derived fields** (–∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–≤—è–∑–∏ —Å –ª–æ–≥–∞–º–∏, –≤ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –∏–º–µ–Ω–∞ –ª–µ–π–±–ª–æ–≤ —Å–æ–≤–ø–∞–¥–∞—é—Ç).
4.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ª–µ–π–±–ª—ã –≤ Prometheus (–Ω–∞–ø—Ä–∏–º–µ—Ä, `pod`) —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –ª–µ–π–±–ª–∞–º–∏ –≤ Loki. Promtail –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–±–∏—Ä–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–∑ Kubernetes, —Ç–∞–∫ —á—Ç–æ `pod`, `namespace`, `app` –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å "–∏–∑ –∫–æ—Ä–æ–±–∫–∏".

–¢–µ–ø–µ—Ä—å –Ω–∞ –ª—é–±–æ–º –≥—Ä–∞—Ñ–∏–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, CPU –ø–æ–¥–∞) –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–∂–∞—Ç—å "Split" –∏ –≤—ã–±—Ä–∞—Ç—å Loki ‚Äî –æ–Ω —Å—Ä–∞–∑—É –ø–æ–¥—Å—Ç–∞–≤–∏—Ç —Ñ–∏–ª—å—Ç—Ä `{pod="–∏–º—è-–≤–∞—à–µ–≥–æ-–ø–æ–¥–∞"}`.