alertmanager:
  alertmanagerSpec:
    externalUrl: "https://alertmanager.ccsfarm.local"
  config:
    global:
      resolve_timeout: 5m
    
    # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
    route:
      group_by: ['alertname', 'job']
      group_wait: 30s
      group_interval: 5m
      repeat_interval: 4h
      # ğŸ‘‡ Ğ“Ğ›ĞĞ’ĞĞĞ•: Ğ£ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ´ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ĞµĞ»Ñ
      receiver: 'telegram-receiver'
      routes:
        - matchers:
            - alertname="Watchdog"
          receiver: 'null'
    
    # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ĞµĞ»ĞµĞ¹
    receivers:
    - name: 'null'
    - name: 'telegram-receiver'
      telegram_configs:
      # ğŸ‘‡ Ğ’ĞĞ¨Ğ˜ Ğ”ĞĞĞĞ«Ğ•
      - bot_token: $BOT_ID
        api_url: 'https://api.telegram.org'
        chat_id: -588423214
        parse_mode: 'HTML'
        message: |-
          {{ range .Alerts }}
          ğŸ”¥ <b>{{ .Status | toUpper }}</b>: {{ .Labels.alertname }}
          ğŸš¨ <b>Severity:</b> {{ .Labels.severity | toUpper }}
          ğŸ“¦ <b>Job:</b> {{ .Labels.job }}
          ğŸ–¥ <b>Pod:</b> {{ .Labels.pod }}
          ğŸ“ <b>Info:</b> {{ or .Annotations.message .Annotations.description .Annotations.summary "N/A" }}
          ğŸ”— <a href="{{ .GeneratorURL }}">Source</a>
          {{ end }}
